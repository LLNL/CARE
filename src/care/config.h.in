//////////////////////////////////////////////////////////////////////////////////////
// Copyright 2020 Lawrence Livermore National Security, LLC and other CARE developers.
// See the top-level LICENSE file for details.
//
// SPDX-License-Identifier: BSD-3-Clause
//////////////////////////////////////////////////////////////////////////////////////

#ifndef _CARE_CONFIG_H_
#define _CARE_CONFIG_H_

#cmakedefine CARE_LOOP_VVERBOSE_ENABLED
#cmakedefine01 CARE_HAVE_LOOP_FUSER
#cmakedefine CARE_DEBUG
#cmakedefine01 CARE_ENABLE_GPU_SIMULATION_MODE
#cmakedefine CARE_ENABLE_IMPLICIT_CONVERSIONS
#cmakedefine ENABLE_HIP
#cmakedefine ENABLE_CUDA

// Optional dependencies
#cmakedefine01 CARE_HAVE_BASIL
#cmakedefine01 CARE_HAVE_CUB
#cmakedefine01 CARE_HAVE_LLNL_GLOBALID
#cmakedefine01 CARE_HAVE_NVTOOLSEXT

#if defined(_WIN32) && !defined(CARESTATICLIB)
#if defined(CARE_EXPORTS)
#define CARE_DLL_API __declspec(dllexport)
#else // defined(CARE_EXPORTS)
#define CARE_DLL_API __declspec(dllimport)
#endif // defined(CARE_EXPORTS)
#else // defined(_WIN32) && !defined(CARESTATICLIB)
#define CARE_DLL_API
#endif // defined(_WIN32) && !defined(CARESTATICLIB)

#if defined(__CUDA_ARCH__) || defined(__HIP_DEVICE_COMPILE__)
#define CARE_DEVICE_COMPILE
#endif

#if defined(__CUDACC__) || defined(__HIPCC__)
#define CARE_GPUCC
#endif

#if defined(CARE_GPUCC)
#define CARE_HOST_DEVICE __host__ __device__
#define CARE_DEVICE __device__
#define CARE_HOST __host__
#define CARE_GLOBAL __global__
#else // defined(CARE_GPUCC)
#define CARE_HOST_DEVICE
#define CARE_DEVICE
#define CARE_HOST
#define CARE_GLOBAL
#endif // defined(CARE_GPUCC)

// set various aliases
#if defined(__CUDACC__)

#define gpuStream_t cudaStream_t
#define gpuHostAllocDefault cudaHostAllocDefault;

#define gpuMemcpyKind cudaMemcpyKind
#define gpuMemcpyHostToHost cudaMemcpyHostToHost
#define gpuMemcpyHostToDevice cudaMemcpyHostToDevice
#define gpuMemcpyDeviceToHost cudaMemcpyDeviceToHost
#define gpuMemcpyDeviceToDevice cudaMemcpyDeviceToDevice
#define gpuMemcpyDefault cudaMemcpyDefault

#elif defined(__HIPCC__)

#define gpuStream_t hipStream_t
#define gpuHostAllocDefault hipHostAllocDefault;

#define gpuMemcpyKind hipMemcpyKind
#define gpuMemcpyHostToHost hipMemcpyHostToHost
#define gpuMemcpyHostToDevice hipMemcpyHostToDevice
#define gpuMemcpyDeviceToHost hipMemcpyDeviceToHost
#define gpuMemcpyDeviceToDevice hipMemcpyDeviceToDevice
#define gpuMemcpyDefault hipMemcpyDefault

#endif // end __HIPCC__ case

#endif // !defined(_CARE_CONFIG_H_)

